<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=<device-width>, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.3.2/dist/chart.min.js"></script>
</head>
<body>

    <canvas id= "myChart" width= "400" height="400">

    </canvas>
 
    <script>

        
        const xlabels = [];
        const ylabels = [];
        makeChart();

        async function getData(){
            const response = await fetch("ph.csv");
            const data = await response.text();

            const table = data.split("\n").slice(1);
            
            table.forEach(row => {
                const col = row.split(',');
                const totalHouse =col[4];
                ylabels.push(totalHouse);
                const region = col[3];
                xlabels.push(region);
                //console.log(totalHouse, region);
            })
        }

        async function makeChart(){
            await getData();
            const ctx = document.getElementById('myChart').getContext('2d');
            const myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: xlabels,
                    datasets: [{
                        label: 'Total Housing',
                        data: ylabels,
                        backgroundColor: ['rgba(255, 99, 132, 0.2)',],
                        borderColor: ['rgba(255, 99, 132, 1)',],
                        borderWidth: 1
                    }]
                },
            });
        }

    </script>

</body>
</html>